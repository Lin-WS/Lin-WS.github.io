<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>huffman编码 - Lin&#039;s blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Lin&#039;s blog"><meta name="msapplication-TileImage" content="/img/logo.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Lin&#039;s blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="具体原理及定义请百度，下面直接进行实现。具体实现过程是: 统计若干字符出现的频率，将其按频率（权重）升序存放进队列中，每次从队列中取两个结点合成一颗二叉树，这两个结点的根节点是取出来两个结点的字符的权重和，并且将新的结点放入队列中，满足队列依旧是升序排列，一直持续直到队列中仅剩最后一个结点，此时这个结点就是 Human 树的根节点，构成的树也叫最优二叉树"><meta property="og:type" content="blog"><meta property="og:title" content="huffman编码"><meta property="og:url" content="https://lin-ws.github.io/2024/12/26/huffman%E7%BC%96%E7%A0%81/"><meta property="og:site_name" content="Lin&#039;s blog"><meta property="og:description" content="具体原理及定义请百度，下面直接进行实现。具体实现过程是: 统计若干字符出现的频率，将其按频率（权重）升序存放进队列中，每次从队列中取两个结点合成一颗二叉树，这两个结点的根节点是取出来两个结点的字符的权重和，并且将新的结点放入队列中，满足队列依旧是升序排列，一直持续直到队列中仅剩最后一个结点，此时这个结点就是 Human 树的根节点，构成的树也叫最优二叉树"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/6d4dc6d38fd930b34a8e75f099ca8e76.png"><meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/75fc789c117860a6cada1a3c2332de4e.png"><meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/8184b210f7d10221f855cb3f1cf0840c.png"><meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/ac7bc5c5624d4da9400a2908eb62347d.png"><meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/656968f1df47795c5f782f8406d99730.png"><meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/959c1889095896df3c41da18362c1976.png"><meta property="og:image" content="https://i-blog.csdnimg.cn/blog_migrate/e5a85e4cdfa257e27029c55af35d497a.png"><meta property="article:published_time" content="2024-12-25T16:06:10.000Z"><meta property="article:modified_time" content="2024-12-25T16:19:01.026Z"><meta property="article:author" content="Wen Shilin"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://i-blog.csdnimg.cn/blog_migrate/6d4dc6d38fd930b34a8e75f099ca8e76.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://lin-ws.github.io/2024/12/26/huffman%E7%BC%96%E7%A0%81/"},"headline":"huffman编码","image":["https://i-blog.csdnimg.cn/blog_migrate/6d4dc6d38fd930b34a8e75f099ca8e76.png","https://i-blog.csdnimg.cn/blog_migrate/75fc789c117860a6cada1a3c2332de4e.png","https://i-blog.csdnimg.cn/blog_migrate/8184b210f7d10221f855cb3f1cf0840c.png","https://i-blog.csdnimg.cn/blog_migrate/ac7bc5c5624d4da9400a2908eb62347d.png","https://i-blog.csdnimg.cn/blog_migrate/656968f1df47795c5f782f8406d99730.png","https://i-blog.csdnimg.cn/blog_migrate/959c1889095896df3c41da18362c1976.png","https://i-blog.csdnimg.cn/blog_migrate/e5a85e4cdfa257e27029c55af35d497a.png"],"datePublished":"2024-12-25T16:06:10.000Z","dateModified":"2024-12-25T16:19:01.026Z","author":{"@type":"Person","name":"Wen Shilin"},"publisher":{"@type":"Organization","name":"Lin's blog","logo":{"@type":"ImageObject","url":"https://lin-ws.github.io/img/logo.svg"}},"description":"具体原理及定义请百度，下面直接进行实现。具体实现过程是: 统计若干字符出现的频率，将其按频率（权重）升序存放进队列中，每次从队列中取两个结点合成一颗二叉树，这两个结点的根节点是取出来两个结点的字符的权重和，并且将新的结点放入队列中，满足队列依旧是升序排列，一直持续直到队列中仅剩最后一个结点，此时这个结点就是 Human 树的根节点，构成的树也叫最优二叉树"}</script><link rel="canonical" href="https://lin-ws.github.io/2024/12/26/huffman%E7%BC%96%E7%A0%81/"><link rel="icon" href="/img/logo.svg"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/6.0.0/css/all.min.css"><link data-pjax rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/11.7.0/styles/atom-one-light.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link data-pjax rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.10.0/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.8.1/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdnjs.loli.net/ajax/libs/pace/1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="Lin&#039;s blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98">常见问题</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Lin-WS/Lin-WS.github.io"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">huffman编码</h1><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">  <i class="far fa-calendar-alt"> </i><time dateTime="2024-12-25T16:06:10.000Z" title="2024-12-25T16:06:10.000Z">2024-12-26</time></span><span class="level-item is-hidden-mobile"><i class="far fa-calendar-check"> </i><time dateTime="2024-12-25T16:19:01.026Z" title="2024-12-25T16:19:01.026Z">2024-12-26</time></span><span class="level-item"><i class="fa-regular fa-clock"> </i>1 小时读完 (大约9608个字)</span><span class="icon-container"><i class="fa-regular fa-eye"> </i> </span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><div class="content"><p>具体原理及定义请百度，下面直接进行实现。具体实现过程是: 统计若干字符出现的频率，将其按频率（权重）升序存放进队列中，每次从队列中取两个结点合成一颗二叉树，这两个结点的根节点是取出来两个结点的字符的权重和，并且将新的结点放入队列中，满足队列依旧是升序排列，一直持续直到队列中仅剩最后一个结点，此时这个结点就是 Human 树的根节点，构成的树也叫最优二叉树</p>
<span id="more"></span>

<h1 id="Huffman-编码"><a href="#Huffman-编码" class="headerlink" title="Huffman 编码"></a><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%93%88%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81">Huffman 编码</a></h1><h2 id="源代码"><a href="#源代码" class="headerlink" title="源代码"></a>源代码</h2><p>下面将分为两个文件，作用分别是 Huffman 编码以及解码，不再模拟传输过程，仅仅是简单模拟数据压缩以及恢复过程。<br>由于分为了两个文件，而两个文件都需要得到每个字符的Huffman编码(或者说Huffman树)，因此两个文件构造Huffman树的过程是一样的，并且都读取同一个文件的数据来生成Huffman树</p>
<h2 id="encode-c"><a href="#encode-c" class="headerlink" title="encode.c"></a>encode.c</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Huffman 编码的实现</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> FILEINPUTSTRING <span class="string">&quot;inputString.txt&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> FILEENCODESTRING <span class="string">&quot;encodeString.txt&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> FILEENCODING <span class="string">&quot;encoding.txt&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Huffman 树的结点</span></span><br><span class="line"><span class="comment"> * @param mCharacter 要编码的单个字符</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">nodeTree</span> &#123;</span></span><br><span class="line">    <span class="type">char</span> mCharacter;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">nodeTree</span>* <span class="title">mLeft</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">nodeTree</span>* <span class="title">mRight</span>;</span></span><br><span class="line">&#125;NodeTree, *LPNodeTree;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 树</span></span><br><span class="line"><span class="comment"> * 指向树的根结点的指针</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    LPNodeTree root;</span><br><span class="line">&#125;Tree, *LPTree;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 队列结点</span></span><br><span class="line"><span class="comment"> * 根据分析可知构成 Huffman 树要通过一个单调优先队列来完成</span></span><br><span class="line"><span class="comment"> * 因为要进行多次插入操作，因此选择链队列，并且由于不像常规的队列一样</span></span><br><span class="line"><span class="comment"> * 满足头部弹出，尾部进入，因此可不设头尾指针 (其实更像链表) </span></span><br><span class="line"><span class="comment"> * @param mPriority 权重，即字符出现的次数</span></span><br><span class="line"><span class="comment"> * @param mTreeNode 树的结点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">nodeQueue</span> &#123;</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> mPriority;</span><br><span class="line">    NodeTree mTreeNode;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">nodeQueue</span>* <span class="title">mNext</span>;</span></span><br><span class="line">&#125;NodeQueue, *LPNodeQueue;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***********************************************************</span></span><br><span class="line"><span class="comment"> * Huffman 树的构建                                         *</span></span><br><span class="line"><span class="comment"> * 先将每种字符保存在队列的树结点中，并将权重保存在队列中          *</span></span><br><span class="line"><span class="comment"> * 再将所有结点按照权重升序插入单调优先队列中                    *</span></span><br><span class="line"><span class="comment"> **********************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 初始化空队列</span></span><br><span class="line"><span class="comment"> * 将队列创建出来 (空队列)，各个成员都赋予初值</span></span><br><span class="line"><span class="comment"> * @return 队列头结点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">LPNodeQueue <span class="title function_">initialQueue</span><span class="params">()</span> &#123;</span><br><span class="line">    LPNodeQueue headQueueNode = (LPNodeQueue)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(NodeQueue));     <span class="comment">// 堆区申请队列头结点空间</span></span><br><span class="line">    headQueueNode-&gt;mNext = <span class="literal">NULL</span>;</span><br><span class="line">    headQueueNode-&gt;mPriority = <span class="number">0</span>;</span><br><span class="line">    headQueueNode-&gt;mTreeNode.mCharacter = <span class="number">0</span>;</span><br><span class="line">    headQueueNode-&gt;mTreeNode.mLeft = headQueueNode-&gt;mTreeNode.mRight = <span class="literal">NULL</span>;        <span class="comment">// 初始化队列头结点的各个成员</span></span><br><span class="line">    <span class="keyword">return</span> headQueueNode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建队列的单个结点，并将其成员赋值</span></span><br><span class="line"><span class="comment"> * @param priority 字符的权重</span></span><br><span class="line"><span class="comment"> * @param character 被统计的单个字符</span></span><br><span class="line"><span class="comment"> * @param left 树结点的左孩子</span></span><br><span class="line"><span class="comment"> * @param right 树结点的右孩子</span></span><br><span class="line"><span class="comment"> * @return 单个队列结点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">LPNodeQueue <span class="title function_">createQueueNode</span><span class="params">(<span class="type">unsigned</span> <span class="type">int</span> priority, <span class="type">char</span> character, LPNodeTree left, LPNodeTree right)</span> &#123;</span><br><span class="line">    LPNodeQueue newQueueNode = (LPNodeQueue)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(NodeQueue));</span><br><span class="line">    newQueueNode-&gt;mNext = <span class="literal">NULL</span>;</span><br><span class="line">    newQueueNode-&gt;mPriority = priority;</span><br><span class="line">    newQueueNode-&gt;mTreeNode.mCharacter = character;</span><br><span class="line">    newQueueNode-&gt;mTreeNode.mLeft = left;</span><br><span class="line">    newQueueNode-&gt;mTreeNode.mRight = right;</span><br><span class="line">    <span class="keyword">return</span> newQueueNode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建树结点</span></span><br><span class="line"><span class="comment"> * @param character 被统计的单个字符</span></span><br><span class="line"><span class="comment"> * @param left 树结点的左孩子</span></span><br><span class="line"><span class="comment"> * @param right 树结点的右孩子</span></span><br><span class="line"><span class="comment"> * @return 树结点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">LPNodeTree <span class="title function_">createTreeNode</span><span class="params">(<span class="type">char</span> character, LPNodeTree left, LPNodeTree right)</span> &#123;</span><br><span class="line">    LPNodeTree newTreeNode = (LPNodeTree)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(NodeTree));</span><br><span class="line">    newTreeNode-&gt;mCharacter = character;</span><br><span class="line">    newTreeNode-&gt;mLeft = left;</span><br><span class="line">    newTreeNode-&gt;mRight = right;</span><br><span class="line">    <span class="keyword">return</span> newTreeNode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 入队列操作，将结点按权重升序插入队列</span></span><br><span class="line"><span class="comment"> * @param headQueueNode 要插入的队列头结点</span></span><br><span class="line"><span class="comment"> * @param queueNode 要插入的队列结点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">enQueue</span><span class="params">(LPNodeQueue headQueueNode, LPNodeQueue queueNode)</span> &#123;</span><br><span class="line">    LPNodeQueue preQueueNode = headQueueNode;   <span class="comment">// preQueueNode 一直指向 moveQueueNode 的直接前驱结点</span></span><br><span class="line">    LPNodeQueue moveQueueNode = headQueueNode-&gt;mNext;   <span class="comment">// moveQueueNode 定位为首元结点</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 队列不为空并且待插入结点的权值大于当前 moveQueueNode 的权值，</span></span><br><span class="line"><span class="comment">     * 则要将待插入结点往后移动</span></span><br><span class="line"><span class="comment">     * 最终定位到 preQueueNode 是 moveQUeueNode 的直接前驱结点，此时 moveQUeueNode 所处的位置应该是</span></span><br><span class="line"><span class="comment">     * 待插入结点的目标位置</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">while</span>(moveQueueNode!=<span class="literal">NULL</span> &amp;&amp; queueNode-&gt;mPriority&gt;moveQueueNode-&gt;mPriority) &#123;</span><br><span class="line">        preQueueNode = moveQueueNode;</span><br><span class="line">        moveQueueNode = moveQueueNode-&gt;mNext;</span><br><span class="line">    &#125;</span><br><span class="line">    queueNode-&gt;mNext = moveQueueNode;</span><br><span class="line">    preQueueNode-&gt;mNext = queueNode;    <span class="comment">// 找到定位后将新结点直接插入即可</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 出队列操作，将头结点指向的结点移出队列并返回队列结点元素的树结点</span></span><br><span class="line"><span class="comment"> * 因为最终是需要使用树结点来构成最优二叉树，而非是队列结点</span></span><br><span class="line"><span class="comment"> * @param headQueueNode 队列头结点</span></span><br><span class="line"><span class="comment"> * @return 移出队列结点元素的树结点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">LPNodeTree <span class="title function_">deQueue</span><span class="params">(LPNodeQueue headQueueNode)</span> &#123;</span><br><span class="line">    <span class="comment">// 空队列直接退出</span></span><br><span class="line">    LPNodeQueue moveQueueNode = headQueueNode-&gt;mNext;</span><br><span class="line">    <span class="keyword">if</span>(moveQueueNode == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;QUEUE EMPTY!\n&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);        <span class="comment">// 直接中止程序</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 重新构建一个树结点，将移出的队列结点释放</span></span><br><span class="line">    LPNodeTree returnTreeNode = createTreeNode(moveQueueNode-&gt;mTreeNode.mCharacter, </span><br><span class="line">                                               moveQueueNode-&gt;mTreeNode.mLeft, </span><br><span class="line">                                               moveQueueNode-&gt;mTreeNode.mRight);</span><br><span class="line">    headQueueNode-&gt;mNext = moveQueueNode-&gt;mNext;    <span class="comment">// 移除出队列首元结点</span></span><br><span class="line">    moveQueueNode-&gt;mNext = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="built_in">free</span>(moveQueueNode);</span><br><span class="line">    moveQueueNode = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> returnTreeNode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 统计字符串各个字符的权重并构建单调优先队列</span></span><br><span class="line"><span class="comment"> * @param inputString 待统计的字符串，通过文件得到</span></span><br><span class="line"><span class="comment"> * @return 单调优先队列的头结点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">LPNodeQueue <span class="title function_">getPriorityAndCreateQueue</span><span class="params">(<span class="type">char</span>* inputString)</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 按照 ASCII 码来统计字符，使用哈希表</span></span><br><span class="line"><span class="comment">     * ASCII 码表上总共有 256 个字符</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span>* priority = (<span class="type">unsigned</span> <span class="type">int</span>*)<span class="built_in">calloc</span>(<span class="number">256</span>, <span class="keyword">sizeof</span>(<span class="type">unsigned</span> <span class="type">int</span>));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; inputString[i] != <span class="string">&#x27;\0&#x27;</span>; ++i) &#123;</span><br><span class="line">        priority[inputString[i]]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 创建队列</span></span><br><span class="line">    LPNodeQueue headQueueNode = initialQueue();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">256</span>; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span>(priority[i] &gt; <span class="number">0</span>) &#123;   <span class="comment">// 字符数量大于 0 的才入队列</span></span><br><span class="line">            LPNodeQueue newQueueNode = createQueueNode(priority[i], (<span class="type">char</span>)i, <span class="literal">NULL</span>, <span class="literal">NULL</span>); <span class="comment">// 创建队列结点，此时树结点的左右子树都是空</span></span><br><span class="line">            enQueue(headQueueNode, newQueueNode);       <span class="comment">// 将队列结点插入队列</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">free</span>(priority);</span><br><span class="line">    <span class="keyword">return</span> headQueueNode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建 Huffman树</span></span><br><span class="line"><span class="comment"> * @param inputString 构建树的字符串，由文件得到</span></span><br><span class="line"><span class="comment"> * @return Huffman 指向 Huffman 树的根节点的指针</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">LPTree <span class="title function_">createHuffmanTree</span><span class="params">(<span class="type">char</span>* inputString)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(inputString == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;INPUTSTRING EMPTY!\n&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    LPNodeQueue headQueueNode = getPriorityAndCreateQueue(inputString); <span class="comment">// 得到单调优先队列</span></span><br><span class="line">    <span class="keyword">if</span>(headQueueNode-&gt;mNext == <span class="literal">NULL</span>) &#123;  <span class="comment">// 队列为空</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;QUEUE EMPTY!\n&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 取出队列两个结点合并成为一个根结点后在插入队列，</span></span><br><span class="line"><span class="comment">     * 直到队列中只剩一个结点</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">while</span>(headQueueNode-&gt;mNext-&gt;mNext != <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="type">unsigned</span> <span class="type">int</span> priority = headQueueNode-&gt;mNext-&gt;mPriority +</span><br><span class="line">                                headQueueNode-&gt;mNext-&gt;mNext-&gt;mPriority; <span class="comment">// 先得到将要弹出的的两个结点的权重之和</span></span><br><span class="line">        LPNodeTree left = deQueue(headQueueNode);</span><br><span class="line">        LPNodeTree right = deQueue(headQueueNode);</span><br><span class="line">        LPNodeQueue newQueueNode = createQueueNode(priority, <span class="string">&#x27;0&#x27;</span>, left, right);   <span class="comment">// 创建新的队列结点，此时有左右孩子了，而字符可以随意给一个</span></span><br><span class="line">        enQueue(headQueueNode, newQueueNode);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 创建树指针，指向 Huffman 树的根结点</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    LPTree huffmanTree = (LPTree)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Tree));</span><br><span class="line">    LPNodeTree newTreeNode = createTreeNode(headQueueNode-&gt;mNext-&gt;mTreeNode.mCharacter, </span><br><span class="line">                                            headQueueNode-&gt;mNext-&gt;mTreeNode.mLeft, </span><br><span class="line">                                            headQueueNode-&gt;mNext-&gt;mTreeNode.mRight);</span><br><span class="line">    <span class="comment">// 销毁最后一个队列结点以及头结点</span></span><br><span class="line">    LPNodeQueue firstQueueNode =  headQueueNode-&gt;mNext;</span><br><span class="line">    headQueueNode-&gt;mNext = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="built_in">free</span>(firstQueueNode); firstQueueNode = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="built_in">free</span>(headQueueNode); headQueueNode = <span class="literal">NULL</span>;</span><br><span class="line">    huffmanTree-&gt;root = newTreeNode;</span><br><span class="line">    <span class="keyword">return</span> huffmanTree;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*************************************************   到此 Huffman 树已经构建完成，下面可以简单测试一下 ********************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 树的前序遍历</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">preprint</span><span class="params">(LPNodeTree root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(root != <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%c &quot;</span>, root-&gt;mCharacter);</span><br><span class="line">        preprint(root-&gt;mLeft);</span><br><span class="line">        preprint(root-&gt;mRight);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 树的中序遍历</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">midprint</span><span class="params">(LPNodeTree root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(root != <span class="literal">NULL</span>) &#123;</span><br><span class="line">        midprint(root-&gt;mLeft);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%c &quot;</span>, root-&gt;mCharacter);</span><br><span class="line">        midprint(root-&gt;mRight);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">testHuffmanTree</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 输入的字符串定为 &quot;aaaaabbbbcccddeffffff&quot;，即 5 个 a，4 个 b，3 个 c， 2 个 d，1 个 e 以及 6 个 f</span></span><br><span class="line"><span class="comment">     * 这样简单的字符经过人工计算得到的 Huffman 树的</span></span><br><span class="line"><span class="comment">     * 前序遍历应该为 &quot;0 0 b a 0 0 0 e d c f&quot;</span></span><br><span class="line"><span class="comment">     * 中序遍历应该为 &quot;b 0 a 0 e 0 d 0 c 0 f&quot;</span></span><br><span class="line"><span class="comment">     * 出现 0 是因为在 createHuffmanTree() 函数中创建新的队列结点时给的任意字符为 &#x27;0&#x27;</span></span><br><span class="line"><span class="comment">     * 经验证确实如此</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">char</span>* inputString = <span class="string">&quot;aaaaabbbbcccddeffffff&quot;</span>;</span><br><span class="line">    LPTree huffmanTree = createHuffmanTree(inputString);</span><br><span class="line">    preprint(huffmanTree-&gt;root);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    midprint(huffmanTree-&gt;root);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**************************************************************************</span></span><br><span class="line"><span class="comment"> * Huffman 树创建完成之后就可以提取 Huffman 编码表了，可以有很多方法              *</span></span><br><span class="line"><span class="comment"> * 比如链表链接，但是对于编码表来说，查找肯定是主要操作，所以选择用查找速度更快的      *</span></span><br><span class="line"><span class="comment"> * 哈希表，通过遍历 Huffman 树，左子树填 0 右子树填 1，最终构成一个完整的编码表     *</span></span><br><span class="line"><span class="comment"> **************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 初始化 HushMap，由于 key 值是字符，因此可以直接把字符对应的 ASCII 码作为索引</span></span><br><span class="line"><span class="comment"> * @return 二维哈希表的首地址，行表示的是每个字符，列表示的是每个字符的二进制编码</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">char</span>** <span class="title function_">initialHushMapCodingTable</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 由于 ASCII 码中有 256 个字符 (包括不可见字符，因为要用十进制 ASCII 作为索引，</span></span><br><span class="line"><span class="comment">     * 因此不可见字符虽然不会出现在 inputString 中，但还是需要为他们创建索引)，所以</span></span><br><span class="line"><span class="comment">     * 需要创建 256 个连续空间，用用来保存每一个字符的编码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">char</span>** codingTable = (<span class="type">char</span>**)<span class="built_in">calloc</span>(<span class="number">256</span>, <span class="keyword">sizeof</span>(<span class="type">char</span>*));</span><br><span class="line">    <span class="keyword">return</span> codingTable;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将二进制编码信息录入到编码表中</span></span><br><span class="line"><span class="comment"> * @param codingTable 待录入信息的 Huffman 编码表</span></span><br><span class="line"><span class="comment"> * @param code 编码</span></span><br><span class="line"><span class="comment"> * @param character 编码对应的字符</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">addCodingToCodingTable</span><span class="params">(<span class="type">char</span>** codingTable, <span class="type">char</span>* code, <span class="type">char</span> character)</span> &#123;</span><br><span class="line">    <span class="type">int</span> codeSize = <span class="built_in">strlen</span>(code);</span><br><span class="line">    codingTable[character] = (<span class="type">char</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(codeSize+<span class="number">1</span>));   <span class="comment">// 给要录入信息的字符开辟存储编码的空间</span></span><br><span class="line">    <span class="built_in">strcpy</span>(codingTable[character], code);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 递归遍历 Huffman 树来得到每个字符的编码，并将其加入编码表</span></span><br><span class="line"><span class="comment"> * @param root Huffman 树的根结点</span></span><br><span class="line"><span class="comment"> * @param codingTable Huffman 编码表</span></span><br><span class="line"><span class="comment"> * @param code 存储当前字符的 Huffman 编码信息</span></span><br><span class="line"><span class="comment"> * @param k code 当前的长度，也可以说是当前结点所在树的深度</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">travelHuffmanTree</span><span class="params">(LPNodeTree root, <span class="type">char</span>** codingTable, <span class="type">char</span>* code, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="comment">// 递归出口，当遍历到 Huffman树的叶子节点时，就到达了字符所在的位置，此时 code 中就是编码</span></span><br><span class="line">    <span class="keyword">if</span>(root-&gt;mLeft==<span class="literal">NULL</span> &amp;&amp; root-&gt;mRight==<span class="literal">NULL</span>) &#123;</span><br><span class="line">        code[k] = <span class="string">&#x27;\0&#x27;</span>;     <span class="comment">// 给编码加上截至符</span></span><br><span class="line">        addCodingToCodingTable(codingTable, code, root-&gt;mCharacter);    <span class="comment">// 加入编码表</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(root-&gt;mLeft != <span class="literal">NULL</span>) &#123; <span class="comment">// 遍历左子树</span></span><br><span class="line">        code[k] = <span class="string">&#x27;0&#x27;</span>;  <span class="comment">// 左分支填 0</span></span><br><span class="line">        travelHuffmanTree(root-&gt;mLeft, codingTable, code, k+<span class="number">1</span>);     <span class="comment">// 进行递归，k 值要加一</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(root-&gt;mRight != <span class="literal">NULL</span>) &#123;  <span class="comment">// 右子树</span></span><br><span class="line">        code[k] = <span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">        travelHuffmanTree(root-&gt;mRight, codingTable, code, k+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建 Huffman 编码表</span></span><br><span class="line"><span class="comment"> * @param tree Huffman 树指针</span></span><br><span class="line"><span class="comment"> * @return 完整的编码表首地址</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">char</span>** <span class="title function_">createHuffmanCodingTable</span><span class="params">(LPTree tree)</span> &#123;</span><br><span class="line">    <span class="type">char</span>** codingTable = initialHushMapCodingTable();</span><br><span class="line">    <span class="type">char</span>* code = (<span class="type">char</span>*)<span class="built_in">calloc</span>(<span class="number">256</span>, <span class="keyword">sizeof</span>(<span class="type">char</span>));  <span class="comment">// 先给编码开辟足够的空间</span></span><br><span class="line">    travelHuffmanTree(tree-&gt;root, codingTable, code, <span class="number">0</span>);    <span class="comment">// 从树的根结点 (第 0 层)开始</span></span><br><span class="line">    <span class="built_in">free</span>(code); <span class="comment">// 填好表后释放空间</span></span><br><span class="line">    <span class="keyword">return</span> codingTable;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/***********************************************  到此 Huffman 编码表也已经创建完成，下面简单测试一下  **********************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/***********************************************************************</span></span><br><span class="line"><span class="comment"> * 输入的字符串还是用之前测试 Huffman 树的数据，即 &quot;aaaaabbbbcccddeffffff&quot;，  *</span></span><br><span class="line"><span class="comment"> * 那么得到的编码表应该如下：                                               *</span></span><br><span class="line"><span class="comment"> * a 01                                                                *</span></span><br><span class="line"><span class="comment"> * b 00                                                                *</span></span><br><span class="line"><span class="comment"> * c 101                                                               *</span></span><br><span class="line"><span class="comment"> * d 1001                                                              *</span></span><br><span class="line"><span class="comment"> * e 1000                                                              *</span></span><br><span class="line"><span class="comment"> * f 11                                                                *</span></span><br><span class="line"><span class="comment"> * 经验证确实如此                                                        *</span></span><br><span class="line"><span class="comment"> ***********************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">testHuffmanCodingTable</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">char</span>* inputString = <span class="string">&quot;aaaaabbbbcccddeffffff&quot;</span>;</span><br><span class="line">    LPTree huffmanTree = createHuffmanTree(inputString);</span><br><span class="line">    <span class="type">char</span>** codingTable = createHuffmanCodingTable(huffmanTree);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">256</span>; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span>(codingTable[i] != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%c %s\n&quot;</span>, i, codingTable[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/********************************************   将待编码字符生成二进制编码   *******************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将待编码字符生成编码 (这里的字符只能是编码表中出现过的字符)</span></span><br><span class="line"><span class="comment"> * @param codingTable 完整的编码表</span></span><br><span class="line"><span class="comment"> * @param  encodeString 待编码字符</span></span><br><span class="line"><span class="comment"> * @return 所有字符的编码</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">char</span>* <span class="title function_">encode</span><span class="params">(<span class="type">char</span>** codingTable, <span class="type">char</span>* encodeString)</span> &#123;</span><br><span class="line">    <span class="type">char</span>* huffmanCode = (<span class="type">char</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">char</span>));</span><br><span class="line">    huffmanCode[<span class="number">0</span>] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">    <span class="type">char</span>* tmp = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="type">int</span> size = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; encodeString[i] != <span class="string">&#x27;\0&#x27;</span>; ++i) &#123;</span><br><span class="line">        <span class="type">int</span> size1 = <span class="built_in">strlen</span>(codingTable[encodeString[i]]);    <span class="comment">// 得到当前字符的编码长度</span></span><br><span class="line">        size += size1;        <span class="comment">// 得到当前已保存的编码的总长度</span></span><br><span class="line">        tmp = (<span class="type">char</span>*)<span class="built_in">realloc</span>(huffmanCode, <span class="keyword">sizeof</span>(<span class="type">char</span>) * (size+<span class="number">10</span>));       <span class="comment">// 重新分配更大的空间</span></span><br><span class="line">        <span class="keyword">if</span>(tmp == <span class="literal">NULL</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;HUFFMANCODE  REALLOCATE MEMORY FAILD!\n&quot;</span>);</span><br><span class="line">            <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        huffmanCode = tmp;</span><br><span class="line">        <span class="built_in">strcat</span>(huffmanCode, codingTable[encodeString[i]]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> huffmanCode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***************************************************     编码生成之后也可以进行小测试     *********************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/***********************************************************************</span></span><br><span class="line"><span class="comment"> * 生成 Huffman 编码表的字符还是跟前两次测试一样，                           *</span></span><br><span class="line"><span class="comment"> * 而待编码的字符定为 &quot;dacbfeabe&quot; (只能是编码表中存在的字符)，则人工计算结果为   *</span></span><br><span class="line"><span class="comment"> *   d  a   c  b  f    e  a  b    e                                    *</span></span><br><span class="line"><span class="comment"> * 1001 01 101 00 11 1000 01 00 1000                                   *</span></span><br><span class="line"><span class="comment"> * 最终结果即为一串上述二进制数字                                           *</span></span><br><span class="line"><span class="comment"> * 经验证确实如此                                                        *</span></span><br><span class="line"><span class="comment"> **********************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">testHuffmanEncode</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">char</span>* inputString = <span class="string">&quot;aaaaabbbbcccddeffffff&quot;</span>;</span><br><span class="line">    LPTree huffmanTree = createHuffmanTree(inputString);</span><br><span class="line">    <span class="type">char</span>** codingTable = createHuffmanCodingTable(huffmanTree);</span><br><span class="line">    <span class="type">char</span>* encodeString = <span class="string">&quot;dacbfeabe&quot;</span>;</span><br><span class="line">    <span class="type">char</span>* huffmanCode = encode(codingTable, encodeString);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, huffmanCode);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**********************************************  至此 encode.c 编码功能已经全部完成    ***************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/***************************************************</span></span><br><span class="line"><span class="comment"> * 文件操作，程序中的 inputString 都应该要从文件中读取   *</span></span><br><span class="line"><span class="comment"> * 并且生成的编码也要保存到文件中                       *</span></span><br><span class="line"><span class="comment"> **************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 从文件中读出文本，这个文件 (INPUTSTRING)是公共的、构成 Huffman 树的</span></span><br><span class="line"><span class="comment"> * 字符文件，并不是要编码或者是解码的文件</span></span><br><span class="line"><span class="comment"> * @return 保存有文本的地址</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">char</span>* <span class="title function_">getInputString</span><span class="params">()</span> &#123;</span><br><span class="line">    FILE* fp = fopen(FILEINPUTSTRING, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>(fp == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s OPEN FAILD!\n&quot;</span>, FILEINPUTSTRING);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    fseek(fp, <span class="number">0L</span>, SEEK_END);    <span class="comment">// 将光标定位到文件末尾，方便统计文件内字符数量</span></span><br><span class="line">    <span class="type">long</span> <span class="type">int</span> size = ftell(fp);</span><br><span class="line">    <span class="keyword">if</span>(size == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s EMPTY!\n&quot;</span>, FILEINPUTSTRING);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    fseek(fp, <span class="number">0L</span>, SEEK_SET);    <span class="comment">// 统计完后将光标重新定位到文件开头</span></span><br><span class="line">    <span class="type">char</span>* inputString = (<span class="type">char</span>*)<span class="built_in">calloc</span>(size+<span class="number">10</span>, <span class="keyword">sizeof</span>(<span class="type">char</span>));   </span><br><span class="line">    <span class="type">char</span> ch;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; (ch = fgetc(fp)) != EOF; ++i) &#123;      <span class="comment">// 将数据存入 inputString</span></span><br><span class="line">        inputString[i] = ch;</span><br><span class="line">        inputString[i+<span class="number">1</span>] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(fp);</span><br><span class="line">    <span class="keyword">return</span> inputString;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 从文件中读取文本，这个文件 (ENCODE)中是待编码的字符</span></span><br><span class="line"><span class="comment"> * @return 保存有文本的地址</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">char</span>* <span class="title function_">getEncodeString</span><span class="params">()</span> &#123;</span><br><span class="line">    FILE* fp = fopen(FILEENCODESTRING, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>(fp == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s OPEN FAILD!\n&quot;</span>, FILEENCODESTRING);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    fseek(fp, <span class="number">0L</span>, SEEK_END);    <span class="comment">// 将光标定位到文件末尾，方便统计文件内字符数量</span></span><br><span class="line">    <span class="type">long</span> <span class="type">int</span> size = ftell(fp);</span><br><span class="line">    <span class="keyword">if</span>(size == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s EMPTY!\n&quot;</span>, FILEENCODESTRING);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    fseek(fp, <span class="number">0L</span>, SEEK_SET);    <span class="comment">// 统计完后将光标重新定位到文件开头</span></span><br><span class="line">    <span class="type">char</span>* encodeString = (<span class="type">char</span>*)<span class="built_in">calloc</span>(size+<span class="number">10</span>, <span class="keyword">sizeof</span>(<span class="type">char</span>));   </span><br><span class="line">    <span class="type">char</span> ch;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; (ch = fgetc(fp)) != EOF; ++i) &#123;      <span class="comment">// 将数据存入 encodeString</span></span><br><span class="line">        encodeString[i] = ch;</span><br><span class="line">        encodeString[i+<span class="number">1</span>] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(fp);</span><br><span class="line">    <span class="keyword">return</span> encodeString;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将生成的编码写入文件中</span></span><br><span class="line"><span class="comment"> * @param huffmanCode 二进制编码</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">putHuffmanCodingInFIle</span><span class="params">(<span class="type">char</span>* huffmanCode)</span> &#123;</span><br><span class="line">    FILE* fp = fopen(FILEENCODING, <span class="string">&quot;w+&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; huffmanCode[i] != <span class="string">&#x27;\0&#x27;</span>; ++i) &#123;</span><br><span class="line">        fputc(huffmanCode[i], fp);</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(fp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***********************************************************  操作流程   *************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">huffmanEncode</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 读取 (INPUTSTRING) 文本</span></span><br><span class="line">    <span class="type">char</span>* inputString = getInputString();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构建 Huffman 树</span></span><br><span class="line">    LPTree huffmanTree = createHuffmanTree(inputString);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构建 Huffman 编码表</span></span><br><span class="line">    <span class="type">char</span>** huffmanCodingTable = createHuffmanCodingTable(huffmanTree);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 读取 (FILEENCODESTRING) 文本</span></span><br><span class="line">    <span class="type">char</span>* encodeString = getEncodeString();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 生成 Huffman 编码</span></span><br><span class="line">    <span class="type">char</span>* huffmanCode = encode(huffmanCodingTable, encodeString);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将 Huffman 编码写入文件 (FILEENCODING)</span></span><br><span class="line">    putHuffmanCodingInFIle(huffmanCode);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n\nENCODE SUCCESS!\n\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/************************************************************* main 函数 *******************************************/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// testHuffmanTree();</span></span><br><span class="line">    <span class="comment">// testHuffmanCodingTable();</span></span><br><span class="line">    <span class="comment">// testHuffmanEncode();</span></span><br><span class="line">    huffmanEncode();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>encode.c 的各个测试结果以及各文件内容及最后的输出文件</p>
<blockquote>
<ul>
<li>哈夫曼树的测试 - - testHuffmanTree() 函数<br><img src="https://i-blog.csdnimg.cn/blog_migrate/6d4dc6d38fd930b34a8e75f099ca8e76.png"><br>与预期结果一致</li>
<li>哈夫曼编码表的测试 - - testHuffmanCodingTable() 函数<br><img src="https://i-blog.csdnimg.cn/blog_migrate/75fc789c117860a6cada1a3c2332de4e.png"><br>与预期结果一致</li>
<li>哈夫曼编码的测试 - - testHuffmanEncode() 函数<br><img src="https://i-blog.csdnimg.cn/blog_migrate/8184b210f7d10221f855cb3f1cf0840c.png"><br>与预期结果一致</li>
<li>执行结果 - - huffmanEncode() 函数<br><img src="https://i-blog.csdnimg.cn/blog_migrate/ac7bc5c5624d4da9400a2908eb62347d.png"></li>
</ul>
</blockquote>
<hr>
<h3 id="2"><a href="#2" class="headerlink" title="2"></a>2</h3><h3 id="2-1"><a href="#2-1" class="headerlink" title="2"></a>2</h3><h3 id="2-2"><a href="#2-2" class="headerlink" title="2"></a>2</h3><h3 id="2-3"><a href="#2-3" class="headerlink" title="2"></a>2</h3><h3 id="2-4"><a href="#2-4" class="headerlink" title="2"></a>2</h3><h3 id="2-5"><a href="#2-5" class="headerlink" title="2"></a>2</h3><h3 id="2-6"><a href="#2-6" class="headerlink" title="2"></a>2</h3><h3 id="2-7"><a href="#2-7" class="headerlink" title="2"></a>2</h3><h3 id="inputString-txt"><a href="#inputString-txt" class="headerlink" title="inputString.txt"></a>inputString.txt</h3><p>文件 inputString.txt 中是几篇高中英语课文(不含中文字符)，并随机在文本中插入了键盘上的所有可见字符，保证编码表中包含所有英文可见字符 (大概8632字符)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line">Festivals and celebrations </span><br><span class="line">    Festivals and celebrations of all kinds have been held everywhere since ancient times.Most ancient </span><br><span class="line">festivals would celebrate the end of cold weather,planting in spring and harvest in autumn.Sometimes </span><br><span class="line">celebratewould be held after hunters had caught animals.At that time people would starve if food was </span><br><span class="line">difficult to find,especially during the cold winter months.Today&#x27;s festivals have many origins ,some </span><br><span class="line">religious,some seasonal, and some for special people or events. </span><br><span class="line"></span><br><span class="line">Festivals of the Dead </span><br><span class="line">    Some festivals are held to honour the dead or to satisfy the ancestors,who might return either to </span><br><span class="line">help or to do harm.For the Japanese festival.Obon,people should go to clean graves and light incense </span><br><span class="line">in memory of their ancestors.They also light lamps and play music because they think that this will </span><br><span class="line">lead the ancestors back to earth.In Mexico,people celebrate the Day of the Dead in early November.On </span><br><span class="line">this impoutant feast day,people eat food in the shape of skulls and cakes with &quot;bones&quot; on them.They offer </span><br><span class="line">food,flowers and gifts to the dead.The Western holiday Halloween also had its origin in old beliefs about </span><br><span class="line">the return of the spirits of dead people. It is now a children&#x27;s festival,when they can dress up and to to </span><br><span class="line">their neighbours&#x27;homes to ask for sweets.If the neighbours do not give any sweets,the children might play a </span><br><span class="line">trick on them. </span><br><span class="line"></span><br><span class="line">` 1 2 3 4 5 6 7 8 9 0 - = </span><br><span class="line"></span><br><span class="line">Festivals to Honour </span><br><span class="line">    People Festivals can also be held to honour famous people .The Dragon Boat Festival in China honours the </span><br><span class="line">famous ancient poet,Qu Yuan.In the USA Columbus Day is in memory of the arrival of Christopher Columbus in New </span><br><span class="line">World.India has a national festival on October 2 to honour Mohandas Gandhi,the leader who helped gain India&#x27;s </span><br><span class="line">independence from Britain. </span><br><span class="line"></span><br><span class="line">Harvest Festivals </span><br><span class="line">    Harvest and Thanksgiving festivals can be very happy events.People are grateful because their food is </span><br><span class="line">gathered for the winter and the agricultural work is over.In European countries,people will usually decorate </span><br><span class="line">churches and town halls with flowers and fruit,and will get together to have meals.Some people might win </span><br><span class="line">awards for their farm produce,like the biggest watermelon or the most handsome rooster.China and Japan have </span><br><span class="line">mid-autumn festivals,when people admire the moon and in China,enjoy mooncakes. </span><br><span class="line"></span><br><span class="line">Spring Festivals </span><br><span class="line">    The most energetic and important festivals are the ones that look forward to the end of winter and to </span><br><span class="line">the coming of spring.At the Spring Festival in China,people eat dumplings,fish and meat and may give </span><br><span class="line">children lucky money in red paper.There are dragon dances and carnivals,and families celebrate the Lunar </span><br><span class="line">New Year together.Some Western countries have very exciting carnivals,which take place forty days before </span><br><span class="line">Easter,usually in February.These carnivals might include parades,dancing in the streets day and night,loud </span><br><span class="line">music and colourful clothing of all kinds.Easter is an important religious and social festival for </span><br><span class="line">Christians aroud the world.It celebrates the return of Jesus from the dead and the coming of spring and new </span><br><span class="line">life.Japan’s Cherry Blossom Festival happens a little later.The country, covered with cherry tree flowers, </span><br><span class="line">looks as thought it is covered with pink snow. People love to get together to eat , drink and have fun with </span><br><span class="line">each other.Festivals let us enjoy life,be proud of our customs and forget our work for a little while </span><br><span class="line"></span><br><span class="line">q w e r t y u i o p [ ] \</span><br><span class="line"></span><br><span class="line">A SAD LOVE STORY</span><br><span class="line">    Li Fang was heart-broken.It was Valentine&#x27;s Day and Hu Jin had said she would meet him at the coffee </span><br><span class="line">shop after work. But she didn&#x27;t turn up. She could be with her friends right now laughing at him.She said </span><br><span class="line">she would be there at seven o&#x27;clock, and he thought she would keep her word. He had looked forward to </span><br><span class="line">meeting her all day, and now he was alone with his roses and chocolates, like a fool. Well, he was not </span><br><span class="line">going to hold his breath for her to apologize. He would drown his sadness in coffee. </span><br><span class="line"></span><br><span class="line">    It was obvious that the manager of the coffee shop was waiting for Li Fang to leave-he wiped the tables, </span><br><span class="line">then sat down and turned on the TV-just what Li Fang needed! A sad Chinese story about lost love. </span><br><span class="line"></span><br><span class="line">a s d f g h j k l ; &#x27; </span><br><span class="line"></span><br><span class="line">    The granddaughter of the Goddess of Heaven visted the earth. Her name was Zhinü,the weaving girl. While </span><br><span class="line">she was on earth she met the herd boy Niulang and they fell in love.(&quot;Just like me and Hu Jin,&quot;thought Li Fang.)</span><br><span class="line">They got married secretly, and they were very happy.(&quot;We could be like that,&quot;thought Li Fang.)When the Goddess </span><br><span class="line">of Heaven knew that her granddaughter was married to a human, she became very angry and made the weaving girl </span><br><span class="line">return to Heaven.Niulang tried to follow her, but the river of stars,the Milly Way, stopped him.Finding that </span><br><span class="line">Zhinu was heart-broken, her grandmother finally decided to let the couple cross the Milky Way to meet once a </span><br><span class="line">year. Magpies make a bridge of their wings so the couple can cross the river to meet on the seventh day of </span><br><span class="line">the seventh lunar month. People in China hope that the weather will be fine on that day, because if it is </span><br><span class="line">raining, it means that Zhinü is weeping and the couple won&#x27;t be able to meet. </span><br><span class="line"></span><br><span class="line">    The announcer said,&quot;This is the story of Qiqiao Festival.When foreigners hear about the story, they call </span><br><span class="line">it a Chinese Valentine&#x27;s story.It&#x27;s a fine day today, so I hope you can all meet the one you love.&quot; </span><br><span class="line"></span><br><span class="line">z x c v b n m , . / </span><br><span class="line"></span><br><span class="line">    As Li Fang set off for home, he thought,&quot;I guess Hu Jin doesn&#x27;t love me .I&#x27;ll just throw these flowers </span><br><span class="line">and chocolates away. I don&#x27;t want them to remind me of her.&quot; So he did. </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">~ ! @ # $ % ^ &amp; * ( ) _ + </span><br><span class="line"></span><br><span class="line">    As he sadly passed the tea shop on the corner on his way home, he heard a voice calling him. There was Hu Jin </span><br><span class="line">waving at him and calling , &quot;why are you so late?I&#x27;ve been waiting for you for a long time!And I have a gift for you!&quot; </span><br><span class="line"></span><br><span class="line">    What would he do? He had thrown away her Valentine gifts!She would never forgive him. This would not be a happy </span><br><span class="line">Valentine&#x27;s Day! </span><br><span class="line"></span><br><span class="line">UNIT2 </span><br><span class="line">COME AND EAT HERE (1) </span><br><span class="line">    Wang Peng sat in his empty restaurant feeling very frustrated. It had been a very strange morning. Usually he </span><br><span class="line">got up early and prepared his menu of barbecued mutton kebabs, roast pork, stir-flied vegetables and fried rice. </span><br><span class="line"></span><br><span class="line">Q W E R T Y U I O P &#123; &#125; | </span><br><span class="line"></span><br><span class="line">Then by lunchtime they would all be sold. By now his restaurant ought to be full of people. But not today! Why was that? </span><br><span class="line">What could have happened? He thought of his mutton, beef and bacon cooked in the hottest, finest oil. His cola was sugary </span><br><span class="line">and cold, and his ice cream was made of milk, cream and delicious fruit. &quot;Nothing could be better,&quot; he thought. Suddenly </span><br><span class="line">he saw his friend Li Chang hurrying by. &quot;Hello, Lao Li,&quot; he called. &quot;Your usual?&quot; But Li Chang seemed not to hear. </span><br><span class="line">What was the matter? Something terrible must have happened if Li Chang was not coming to eat in his restaurant as </span><br><span class="line">he always did. Wang Peng followed Li Chang into a new small restaurant. He saw a sign in the window. Tired of all </span><br><span class="line">that fat? Want to lose weight? Come inside Yong Hui&#x27;s slimming restaurant. Only slimming foods served here. Make </span><br><span class="line">yourself thin again! Curiosity drove Wang Peng inside. It was full of people. The hostess, a very thin lady, came </span><br><span class="line"></span><br><span class="line">A S D F G H J K L : &quot; </span><br><span class="line"></span><br><span class="line">forward. &quot;Welcome,&quot; she said. &quot;My name is Yong Hui. I&#x27;ll help you lose weight and be fit in two weeks if you eat here </span><br><span class="line">every day.&quot; Then she gave a menu to Wang Peng. There were few choices of food and drink on it: just rice, raw vegetables </span><br><span class="line">served in vinegar, fruit and water. Wang Peng was amazed at this and especially at the prices. It cost more than a good </span><br><span class="line">meal in his restaurant! He could not believe his eyes. He threw down the menu and hurried outside. On his way home he </span><br><span class="line">thought about his own menu. Did it make people fat? Perhaps he should go to the library and find out. He could not have </span><br><span class="line"></span><br><span class="line">Z X C V B N M &lt; &gt; ?</span><br><span class="line"></span><br><span class="line">Yong Hui getting away with telling people lies! He had better do some research! At the library Wang Peng was surprised </span><br><span class="line">to find that his restaurant served far too much fat and Yong Hui&#x27;s far too little. Even though her customers might get </span><br><span class="line">thin after eating Yong Hui&#x27;s food, they were not eating enough energy-giving food to keep them fit. They would become </span><br><span class="line">tired very quickly. Wang Peng felt more hopeful as he drove back home. Perhaps with a discount and a new sign he could </span><br><span class="line">win his customers back. So he wrote: Want to feel fit and energetic? Come and eat here! Discounts today! Our food gives </span><br><span class="line">you energy all day! The competition between the two restaurants was on!</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="encodeString-txt"><a href="#encodeString-txt" class="headerlink" title="encodeString.txt"></a>encodeString.txt</h3><p>encodeString.txt 中是在 inputString.txt 中随机截取了几段的文本，并在末尾一次性将键盘所有可见字符输入(大概818字符)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">    It was obvious that the manager of the coffee shop was waiting for Li Fang to leave-he wiped the tables, </span><br><span class="line">then sat down and turned on the TV-just what Li Fang needed! A sad Chinese story about lost love.</span><br><span class="line"></span><br><span class="line">    What would he do? He had thrown away her Valentine gifts!She would never forgive him. This would not be a happy </span><br><span class="line">Valentine&#x27;s Day! </span><br><span class="line"></span><br><span class="line">his friend Li Chang hurrying by. &quot;Hello, Lao Li,&quot; he called. &quot;Your usual?&quot; But Li Chang seemed not to hear. </span><br><span class="line">What was the matter? Something terrible must have happened if Li Chang was not coming to eat in his restaurant as </span><br><span class="line">he always did. Wang Peng followed</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">` 1 2 3 4 5 6 7 8 9 0 - = </span><br><span class="line">q w e r t y u i o p [ ] \</span><br><span class="line">a s d f g h j k l ; &#x27; </span><br><span class="line">z x c v b n m , . / </span><br><span class="line"></span><br><span class="line">~ ! @ # $ % ^ &amp; * ( ) _ + </span><br><span class="line">Q W E R T Y U I O P &#123; &#125; | </span><br><span class="line">A S D F G H J K L : &quot; </span><br><span class="line">Z X C V B N M &lt; &gt; ?</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="encoding-txt"><a href="#encoding-txt" class="headerlink" title="encoding.txt"></a>encoding.txt</h3><p>encoding.txt 是得到的 ‘ 0 ‘ ‘ 1 ‘ 编码文件(因为无换行，所以全在同一行了，大概4032字符)，待解码有818字符，大概是 8 * 818 &#x3D; 6544 位，编码后只有4032 位了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">111111111111110101001100011110101010011101111101111011011110101101000111000101101111110000000100110001111000000000111110101110010101100111000100111001111011111000011110000000001111101100011111000011000000100111111011000001110110001111010101001110111111010101001010010000100010111000111111000001111100111100011111101001111101001011001010111000111110000111111101110011001110101100101101111000000001111101010010001100000110100111100000000011111000100110110111011100111011101101011101101010000000001010111111011100110001111010001111010100101111100101011010011110000001011001010100110100111011101011111000000000111100011110000111110001101111001101010001100010110111000111101010000010011000111000111111010011111010010110010101110001111010100100110100001101000110110101110001110101111101110011010011111010010000000100010100111011001111110111000011111001011001111100110110110111000101000111101110111110111000111101110111110101100100011001101001101011111111111100011100000010011000111101010011100010101111010011100000011111010001111101010000111011011000011110000100110100111100000001100101111010100101111100110101010010110011110000001110011110001111100100110111001010110000100010100111111000101001100001000110110110110100110111110000001111101010011100010101111010011101010011101011001110011111100000111110011100010100110101100111100000100101011000110111000111100000010011011111101010011100010101111010011101010111100011110110110011111001111000010010110000110000110011110110100001111100100110111001010110000100010100111010001111011111110101010110010110010110110101110110100110100000010011011111110000110010100001010110100111000111111010011111010010000001001010111000111100000001011001110010110010100010111000111110110110110010001101111101010110110110000110111101110111101101011100011111110010111111000111111010010110101101010111110000001111101100100110111101110011010000011011111010101111010000010111000101100111100010110110001010011011111010100001101010111110110110111000101000111000111111010011111010010000001001010111000111111011001001101011001101001110101011110001111000011111100000011001110010001101110110100001110000001001100011110101010011101111110000000001111101011100110001000001110011101010000111011011111011110101100110000000010001011100011111000001110011100101001011011101110011111010110001011011100011100001001110101100111100001001011000011000001010100110100111010011000011100011111101001111101001000000100101011100011111010101001110111110101011110001111011000111101011010001011100011111000011111100110011000111010001011110000010011011111110010011101110001001000101100110010101100011110011101111101101000000011111001101111010101001011001110111111010001001010000011011100011100100101011100011110001110110010101110001111110000011110111101110111101010001101000110100110100110100110110110110111011011110110111110101010001111011011100010111101101110001001110110111000111111011011100011011101101110000011110110111000000111011011100001111101101110110101110110111100111011011100110011101101011010100010111110101011100111111001111100011101100111100010111010011101111110110001110110111001011111011011011010111101101110010100110101001111110111111010011111000011111000111100001111101010001111111010011111101111110110111000010111110100011111011010011011110111111110101000100111101100111110101111110110111110101111101011111101101011100011011101101110110111110110100110100110110110010111011011010111011011100111011101101110111011110110111011100111011011101111111101101101101001110110111011110111011011101100111101101111010111000111110111110110110110111111011011101100011101101011010101001111100011100111110100001111111010101001011100011110111110100000111101101110101111110101001111110100010011100011101111101101101100011110110110110011111011011011000011101101000011101011101101111111111010101011111101001011110001111101011101101100111110100001011101101110010011110001111111111101010100001111101010111110110100110111010011101101110010001111101001001110001111100111011011011111111010000001111101000101111011011100110111101101110011111111101010000</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="1"><a href="#1" class="headerlink" title="1"></a>1</h3><h3 id="2-8"><a href="#2-8" class="headerlink" title="2"></a>2</h3><h3 id="2-9"><a href="#2-9" class="headerlink" title="2"></a>2</h3><h3 id="2-10"><a href="#2-10" class="headerlink" title="2"></a>2</h3><h3 id="2-11"><a href="#2-11" class="headerlink" title="2"></a>2</h3><h3 id="2-12"><a href="#2-12" class="headerlink" title="2"></a>2</h3><h3 id="2-13"><a href="#2-13" class="headerlink" title="2"></a>2</h3><h3 id="2-14"><a href="#2-14" class="headerlink" title="2"></a>2</h3><h3 id="2-15"><a href="#2-15" class="headerlink" title="2"></a>2</h3><h3 id="2-16"><a href="#2-16" class="headerlink" title="2"></a>2</h3><h3 id="2-17"><a href="#2-17" class="headerlink" title="2"></a>2</h3><h3 id="2-18"><a href="#2-18" class="headerlink" title="2"></a>2</h3><h3 id="2-19"><a href="#2-19" class="headerlink" title="2"></a>2</h3><h3 id="2-20"><a href="#2-20" class="headerlink" title="2"></a>2</h3><h3 id="2-21"><a href="#2-21" class="headerlink" title="2"></a>2</h3><h3 id="2-22"><a href="#2-22" class="headerlink" title="2"></a>2</h3><h3 id="2-23"><a href="#2-23" class="headerlink" title="2"></a>2</h3><h3 id="2-24"><a href="#2-24" class="headerlink" title="2"></a>2</h3><h3 id="2-25"><a href="#2-25" class="headerlink" title="2"></a>2</h3><h3 id="2-26"><a href="#2-26" class="headerlink" title="2"></a>2</h3><h3 id="2-27"><a href="#2-27" class="headerlink" title="2"></a>2</h3><h3 id="2-28"><a href="#2-28" class="headerlink" title="2"></a>2</h3><h3 id="2-29"><a href="#2-29" class="headerlink" title="2"></a>2</h3><h3 id="decode-c"><a href="#decode-c" class="headerlink" title="decode.c"></a>decode.c</h3><p>解码只需要构造跟编码相同的哈夫曼树就可以了，不需要构造编码表</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Huffman 解码的实现</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> FILEINPUTSTRING <span class="string">&quot;inputString.txt&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> FILEENCODING <span class="string">&quot;encoding.txt&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> FILEDECODING <span class="string">&quot;decoding.txt&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Huffman 树的结点</span></span><br><span class="line"><span class="comment"> * @param mCharacter 要编码的单个字符</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">nodeTree</span> &#123;</span></span><br><span class="line">    <span class="type">char</span> mCharacter;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">nodeTree</span>* <span class="title">mLeft</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">nodeTree</span>* <span class="title">mRight</span>;</span></span><br><span class="line">&#125;NodeTree, *LPNodeTree;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 树</span></span><br><span class="line"><span class="comment"> * 指向树的根结点的指针</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    LPNodeTree root;</span><br><span class="line">&#125;Tree, *LPTree;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 队列结点</span></span><br><span class="line"><span class="comment"> * 根据分析可知构成 Huffman 树要通过一个单调优先队列来完成</span></span><br><span class="line"><span class="comment"> * 因为要进行多次插入操作，因此选择链队列，并且由于不像常规的队列一样</span></span><br><span class="line"><span class="comment"> * 满足头部弹出，尾部进入，因此可不设头尾指针 (其实更像链表) </span></span><br><span class="line"><span class="comment"> * @param mPriority 权重，即字符出现的次数</span></span><br><span class="line"><span class="comment"> * @param mTreeNode 树的结点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">nodeQueue</span> &#123;</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> mPriority;</span><br><span class="line">    NodeTree mTreeNode;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">nodeQueue</span>* <span class="title">mNext</span>;</span></span><br><span class="line">&#125;NodeQueue, *LPNodeQueue;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***********************************************************</span></span><br><span class="line"><span class="comment"> * Huffman 树的构建                                         *</span></span><br><span class="line"><span class="comment"> * 先将每种字符保存在队列的树结点中，并将权重保存在队列中          *</span></span><br><span class="line"><span class="comment"> * 再将所有结点按照权重升序插入单调优先队列中                    *</span></span><br><span class="line"><span class="comment"> **********************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 初始化空队列</span></span><br><span class="line"><span class="comment"> * 将队列创建出来 (空队列)，各个成员都赋予初值</span></span><br><span class="line"><span class="comment"> * @return 队列头结点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">LPNodeQueue <span class="title function_">initialQueue</span><span class="params">()</span> &#123;</span><br><span class="line">    LPNodeQueue headQueueNode = (LPNodeQueue)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(NodeQueue));     <span class="comment">// 堆区申请队列头结点空间</span></span><br><span class="line">    headQueueNode-&gt;mNext = <span class="literal">NULL</span>;</span><br><span class="line">    headQueueNode-&gt;mPriority = <span class="number">0</span>;</span><br><span class="line">    headQueueNode-&gt;mTreeNode.mCharacter = <span class="number">0</span>;</span><br><span class="line">    headQueueNode-&gt;mTreeNode.mLeft = headQueueNode-&gt;mTreeNode.mRight = <span class="literal">NULL</span>;        <span class="comment">// 初始化队列头结点的各个成员</span></span><br><span class="line">    <span class="keyword">return</span> headQueueNode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建队列的单个结点，并将其成员赋值</span></span><br><span class="line"><span class="comment"> * @param priority 字符的权重</span></span><br><span class="line"><span class="comment"> * @param character 被统计的单个字符</span></span><br><span class="line"><span class="comment"> * @param left 树结点的左孩子</span></span><br><span class="line"><span class="comment"> * @param right 树结点的右孩子</span></span><br><span class="line"><span class="comment"> * @return 单个队列结点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">LPNodeQueue <span class="title function_">createQueueNode</span><span class="params">(<span class="type">unsigned</span> <span class="type">int</span> priority, <span class="type">char</span> character, LPNodeTree left, LPNodeTree right)</span> &#123;</span><br><span class="line">    LPNodeQueue newQueueNode = (LPNodeQueue)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(NodeQueue));</span><br><span class="line">    newQueueNode-&gt;mNext = <span class="literal">NULL</span>;</span><br><span class="line">    newQueueNode-&gt;mPriority = priority;</span><br><span class="line">    newQueueNode-&gt;mTreeNode.mCharacter = character;</span><br><span class="line">    newQueueNode-&gt;mTreeNode.mLeft = left;</span><br><span class="line">    newQueueNode-&gt;mTreeNode.mRight = right;</span><br><span class="line">    <span class="keyword">return</span> newQueueNode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建树结点</span></span><br><span class="line"><span class="comment"> * @param character 被统计的单个字符</span></span><br><span class="line"><span class="comment"> * @param left 树结点的左孩子</span></span><br><span class="line"><span class="comment"> * @param right 树结点的右孩子</span></span><br><span class="line"><span class="comment"> * @return 树结点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">LPNodeTree <span class="title function_">createTreeNode</span><span class="params">(<span class="type">char</span> character, LPNodeTree left, LPNodeTree right)</span> &#123;</span><br><span class="line">    LPNodeTree newTreeNode = (LPNodeTree)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(NodeTree));</span><br><span class="line">    newTreeNode-&gt;mCharacter = character;</span><br><span class="line">    newTreeNode-&gt;mLeft = left;</span><br><span class="line">    newTreeNode-&gt;mRight = right;</span><br><span class="line">    <span class="keyword">return</span> newTreeNode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 入队列操作，将结点按权重升序插入队列</span></span><br><span class="line"><span class="comment"> * @param headQueueNode 要插入的队列头结点</span></span><br><span class="line"><span class="comment"> * @param queueNode 要插入的队列结点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">enQueue</span><span class="params">(LPNodeQueue headQueueNode, LPNodeQueue queueNode)</span> &#123;</span><br><span class="line">    LPNodeQueue preQueueNode = headQueueNode;   <span class="comment">// preQueueNode 一直指向 moveQueueNode 的直接前驱结点</span></span><br><span class="line">    LPNodeQueue moveQueueNode = headQueueNode-&gt;mNext;   <span class="comment">// moveQueueNode 定位为首元结点</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 队列不为空并且待插入结点的权值大于当前 moveQueueNode 的权值，</span></span><br><span class="line"><span class="comment">     * 则要将待插入结点往后移动</span></span><br><span class="line"><span class="comment">     * 最终定位到 preQueueNode 是 moveQUeueNode 的直接前驱结点，此时 moveQUeueNode 所处的位置应该是</span></span><br><span class="line"><span class="comment">     * 待插入结点的目标位置</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">while</span>(moveQueueNode!=<span class="literal">NULL</span> &amp;&amp; queueNode-&gt;mPriority&gt;moveQueueNode-&gt;mPriority) &#123;</span><br><span class="line">        preQueueNode = moveQueueNode;</span><br><span class="line">        moveQueueNode = moveQueueNode-&gt;mNext;</span><br><span class="line">    &#125;</span><br><span class="line">    queueNode-&gt;mNext = moveQueueNode;</span><br><span class="line">    preQueueNode-&gt;mNext = queueNode;    <span class="comment">// 找到定位后将新结点直接插入即可</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 出队列操作，将头结点指向的结点移出队列并返回队列结点元素的树结点</span></span><br><span class="line"><span class="comment"> * 因为最终是需要使用树结点来构成最优二叉树，而非是队列结点</span></span><br><span class="line"><span class="comment"> * @param headQueueNode 队列头结点</span></span><br><span class="line"><span class="comment"> * @return 移出队列结点元素的树结点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">LPNodeTree <span class="title function_">deQueue</span><span class="params">(LPNodeQueue headQueueNode)</span> &#123;</span><br><span class="line">    <span class="comment">// 空队列直接退出</span></span><br><span class="line">    LPNodeQueue moveQueueNode = headQueueNode-&gt;mNext;</span><br><span class="line">    <span class="keyword">if</span>(moveQueueNode == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;QUEUE EMPTY!\n&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);        <span class="comment">// 直接中止程序</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 重新构建一个树结点，将移出的队列结点释放</span></span><br><span class="line">    LPNodeTree returnTreeNode = createTreeNode(moveQueueNode-&gt;mTreeNode.mCharacter, </span><br><span class="line">                                               moveQueueNode-&gt;mTreeNode.mLeft, </span><br><span class="line">                                               moveQueueNode-&gt;mTreeNode.mRight);</span><br><span class="line">    headQueueNode-&gt;mNext = moveQueueNode-&gt;mNext;    <span class="comment">// 移除出队列首元结点</span></span><br><span class="line">    moveQueueNode-&gt;mNext = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="built_in">free</span>(moveQueueNode);</span><br><span class="line">    moveQueueNode = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> returnTreeNode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 统计字符串各个字符的权重并构建单调优先队列</span></span><br><span class="line"><span class="comment"> * @param inputString 待统计的字符串，通过文件得到</span></span><br><span class="line"><span class="comment"> * @return 单调优先队列的头结点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">LPNodeQueue <span class="title function_">getPriorityAndCreateQueue</span><span class="params">(<span class="type">char</span>* inputString)</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 按照 ASCII 码来统计字符，使用哈希表</span></span><br><span class="line"><span class="comment">     * ASCII 码表上总共有 256 个字符</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span>* priority = (<span class="type">unsigned</span> <span class="type">int</span>*)<span class="built_in">calloc</span>(<span class="number">256</span>, <span class="keyword">sizeof</span>(<span class="type">unsigned</span> <span class="type">int</span>));</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; inputString[i] != <span class="string">&#x27;\0&#x27;</span>; ++i) &#123;</span><br><span class="line">        priority[inputString[i]]++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 创建队列</span></span><br><span class="line">    LPNodeQueue headQueueNode = initialQueue();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">256</span>; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span>(priority[i] &gt; <span class="number">0</span>) &#123;   <span class="comment">// 字符数量大于 0 的才入队列</span></span><br><span class="line">            LPNodeQueue newQueueNode = createQueueNode(priority[i], (<span class="type">char</span>)i, <span class="literal">NULL</span>, <span class="literal">NULL</span>); <span class="comment">// 创建队列结点，此时树结点的左右子树都是空</span></span><br><span class="line">            enQueue(headQueueNode, newQueueNode);       <span class="comment">// 将队列结点插入队列</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">free</span>(priority);</span><br><span class="line">    <span class="keyword">return</span> headQueueNode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建 Huffman树</span></span><br><span class="line"><span class="comment"> * @param inputString 构建树的字符串，由文件得到</span></span><br><span class="line"><span class="comment"> * @return Huffman 指向 Huffman 树的根节点的指针</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">LPTree <span class="title function_">createHuffmanTree</span><span class="params">(<span class="type">char</span>* inputString)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(inputString == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;INPUTSTRING EMPTY!\n&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    LPNodeQueue headQueueNode = getPriorityAndCreateQueue(inputString); <span class="comment">// 得到单调优先队列</span></span><br><span class="line">    <span class="keyword">if</span>(headQueueNode-&gt;mNext == <span class="literal">NULL</span>) &#123;  <span class="comment">// 队列为空</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;QUEUE EMPTY!\n&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 取出队列两个结点合并成为一个根结点后在插入队列，</span></span><br><span class="line"><span class="comment">     * 直到队列中只剩一个结点</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">while</span>(headQueueNode-&gt;mNext-&gt;mNext != <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="type">unsigned</span> <span class="type">int</span> priority = headQueueNode-&gt;mNext-&gt;mPriority +</span><br><span class="line">                                headQueueNode-&gt;mNext-&gt;mNext-&gt;mPriority; <span class="comment">// 先得到将要弹出的的两个结点的权重之和</span></span><br><span class="line">        LPNodeTree left = deQueue(headQueueNode);</span><br><span class="line">        LPNodeTree right = deQueue(headQueueNode);</span><br><span class="line">        LPNodeQueue newQueueNode = createQueueNode(priority, <span class="string">&#x27;0&#x27;</span>, left, right);   <span class="comment">// 创建新的队列结点，此时有左右孩子了，而字符可以随意给一个</span></span><br><span class="line">        enQueue(headQueueNode, newQueueNode);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 创建树指针，指向 Huffman 树的根结点</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    LPTree huffmanTree = (LPTree)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Tree));</span><br><span class="line">    LPNodeTree newTreeNode = createTreeNode(headQueueNode-&gt;mNext-&gt;mTreeNode.mCharacter, </span><br><span class="line">                                            headQueueNode-&gt;mNext-&gt;mTreeNode.mLeft, </span><br><span class="line">                                            headQueueNode-&gt;mNext-&gt;mTreeNode.mRight);</span><br><span class="line">    <span class="comment">// 销毁最后一个队列结点以及头结点</span></span><br><span class="line">    LPNodeQueue firstQueueNode =  headQueueNode-&gt;mNext;</span><br><span class="line">    headQueueNode-&gt;mNext = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="built_in">free</span>(firstQueueNode); firstQueueNode = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="built_in">free</span>(headQueueNode); headQueueNode = <span class="literal">NULL</span>;</span><br><span class="line">    huffmanTree-&gt;root = newTreeNode;</span><br><span class="line">    <span class="keyword">return</span> huffmanTree;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*************************************  Huffman 树创建完成，跟编码的树一模一样   ********************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 树的前序遍历</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">preprint</span><span class="params">(LPNodeTree root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(root != <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%c &quot;</span>, root-&gt;mCharacter);</span><br><span class="line">        preprint(root-&gt;mLeft);</span><br><span class="line">        preprint(root-&gt;mRight);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 树的中序遍历</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">midprint</span><span class="params">(LPNodeTree root)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(root != <span class="literal">NULL</span>) &#123;</span><br><span class="line">        midprint(root-&gt;mLeft);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%c &quot;</span>, root-&gt;mCharacter);</span><br><span class="line">        midprint(root-&gt;mRight);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">testHuffmanTree</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 输入的字符串定为 &quot;aaaaabbbbcccddeffffff&quot;，即 5 个 a，4 个 b，3 个 c， 2 个 d，1 个 e 以及 6 个 f</span></span><br><span class="line"><span class="comment">     * 这样简单的字符经过人工计算得到的 Huffman 树的</span></span><br><span class="line"><span class="comment">     * 前序遍历应该为 &quot;0 0 b a 0 0 0 e d c f&quot;</span></span><br><span class="line"><span class="comment">     * 中序遍历应该为 &quot;b 0 a 0 e 0 d 0 c 0 f&quot;</span></span><br><span class="line"><span class="comment">     * 出现 0 是因为在 createHuffmanTree() 函数中创建新的队列结点时给的任意字符为 &#x27;0&#x27;</span></span><br><span class="line"><span class="comment">     * 经验证确实如此</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">char</span>* inputString = <span class="string">&quot;aaaaabbbbcccddeffffff&quot;</span>;</span><br><span class="line">    LPTree huffmanTree = createHuffmanTree(inputString);</span><br><span class="line">    preprint(huffmanTree-&gt;root);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    midprint(huffmanTree-&gt;root);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**********************************************</span></span><br><span class="line"><span class="comment"> * 根据生成的 Huffman 编码遍历 HUffman 树来解码    *</span></span><br><span class="line"><span class="comment"> * 编码为 0 则向左支移动，编码为 1 则向右支移动，直到 *</span></span><br><span class="line"><span class="comment"> * 到达叶子节点，此时该结点字符即为解码出来的字符     *</span></span><br><span class="line"><span class="comment"> ***********************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 解码过程</span></span><br><span class="line"><span class="comment"> * @param tree Huffman 树指针</span></span><br><span class="line"><span class="comment"> * @param encoding Huffman 编码</span></span><br><span class="line"><span class="comment"> * @return 解码后的字符串</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">char</span>* <span class="title function_">decode</span><span class="params">(LPTree tree, <span class="type">char</span>* encoding)</span> &#123;</span><br><span class="line">    <span class="type">char</span>* decoding = (<span class="type">char</span>*)<span class="built_in">calloc</span>(<span class="number">1</span>, <span class="keyword">sizeof</span>(<span class="type">char</span>));</span><br><span class="line">    <span class="type">char</span>* tmp = <span class="literal">NULL</span>;</span><br><span class="line">    LPNodeTree root = tree-&gt;root;</span><br><span class="line">    <span class="type">int</span> j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; encoding[i] != <span class="string">&#x27;\0&#x27;</span>; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span>(encoding[i] == <span class="string">&#x27;0&#x27;</span>) root = root-&gt;mLeft;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(encoding[i] == <span class="string">&#x27;1&#x27;</span>) root = root-&gt;mRight;</span><br><span class="line">        <span class="keyword">if</span>(root-&gt;mLeft==<span class="literal">NULL</span> &amp;&amp; root-&gt;mRight==<span class="literal">NULL</span>) &#123;</span><br><span class="line">            <span class="type">int</span> size = <span class="built_in">strlen</span>(decoding);</span><br><span class="line">            tmp = (<span class="type">char</span>*)<span class="built_in">realloc</span>(decoding, <span class="keyword">sizeof</span>(<span class="type">char</span>) * (size+<span class="number">10</span>));   <span class="comment">// 分配足够的空间</span></span><br><span class="line">            <span class="keyword">if</span>(tmp == <span class="literal">NULL</span>) &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">&quot;DECODING REALLOCATE MEMORY FAILD!\n&quot;</span>);</span><br><span class="line">                <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            decoding = tmp;</span><br><span class="line">            decoding[j++] = root-&gt;mCharacter;       <span class="comment">// 将当前字符加入到解码字符串中</span></span><br><span class="line">            decoding[j] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">            root = tree-&gt;root;              <span class="comment">// 当前编码解码完成后后续的编码要从根结点重新开始遍历</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> decoding;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/****************************************************    解码完成后测试一番   ***********************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 在 encode.c 中测试编码的时候用的字符串是 &quot;dacbfeabe&quot;，</span></span><br><span class="line"><span class="comment"> * 测试出来得到的编码是 &quot;1001 01 101 00 11 1000 01 00 1000&quot;，</span></span><br><span class="line"><span class="comment"> * 因此这次直接用这一串编码看能不能得出原字符串 &quot;dacbfeabe&quot;</span></span><br><span class="line"><span class="comment"> * 经验证确实如此</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">testHuffmanDecode</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">char</span>* inputString = <span class="string">&quot;aaaaabbbbcccddeffffff&quot;</span>;</span><br><span class="line">    LPTree huffmanTree = createHuffmanTree(inputString);</span><br><span class="line">    <span class="type">char</span>* encoding = <span class="string">&quot;1001011010011100001001000&quot;</span>;</span><br><span class="line">    <span class="type">char</span>* decoding = decode(huffmanTree, encoding);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, decoding);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**********************************************  至此 decode.c 解码功能已经全部完成    ***************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/***************************************************</span></span><br><span class="line"><span class="comment"> * 文件操作，程序中的 inputString 应该要从文件中读取     *</span></span><br><span class="line"><span class="comment"> * 并且生成的编码也要保存到文件中                       *</span></span><br><span class="line"><span class="comment"> **************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 从文件中读出文本，这个文件 (INPUTSTRING)是公共的、构成 Huffman 树的</span></span><br><span class="line"><span class="comment"> * 字符文件，并不是要编码或者是解码的文件</span></span><br><span class="line"><span class="comment"> * @return 保存有文本的地址</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">char</span>* <span class="title function_">getInputString</span><span class="params">()</span> &#123;</span><br><span class="line">    FILE* fp = fopen(FILEINPUTSTRING, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>(fp == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s OPEN FAILD!\n&quot;</span>, FILEINPUTSTRING);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    fseek(fp, <span class="number">0L</span>, SEEK_END);    <span class="comment">// 将光标定位到文件末尾，方便统计文件内字符数量</span></span><br><span class="line">    <span class="type">long</span> <span class="type">int</span> size = ftell(fp);</span><br><span class="line">    <span class="keyword">if</span>(size == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s EMPTY!\n&quot;</span>, FILEINPUTSTRING);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    fseek(fp, <span class="number">0L</span>, SEEK_SET);    <span class="comment">// 统计完后将光标重新定位到文件开头</span></span><br><span class="line">    <span class="type">char</span>* inputString = (<span class="type">char</span>*)<span class="built_in">calloc</span>(size+<span class="number">10</span>, <span class="keyword">sizeof</span>(<span class="type">char</span>));   </span><br><span class="line">    <span class="type">char</span> ch;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; (ch = fgetc(fp)) != EOF; ++i) &#123;      <span class="comment">// 将数据存入 inputString</span></span><br><span class="line">        inputString[i] = ch;</span><br><span class="line">        inputString[i+<span class="number">1</span>] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(fp);</span><br><span class="line">    <span class="keyword">return</span> inputString;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 从文件中读取文本，这个文件 (DECODEING)中是待解码的字符</span></span><br><span class="line"><span class="comment"> * @return 保存有文本的地址</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">char</span>* <span class="title function_">getEncoding</span><span class="params">()</span> &#123;</span><br><span class="line">    FILE* fp = fopen(FILEENCODING, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>(fp == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s OPEN FAILD!\n&quot;</span>, FILEENCODING);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    fseek(fp, <span class="number">0L</span>, SEEK_END);    <span class="comment">// 将光标定位到文件末尾，方便统计文件内字符数量</span></span><br><span class="line">    <span class="type">long</span> <span class="type">int</span> size = ftell(fp);</span><br><span class="line">    <span class="keyword">if</span>(size == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s EMPTY!\n&quot;</span>, FILEENCODING);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    fseek(fp, <span class="number">0L</span>, SEEK_SET);    <span class="comment">// 统计完后将光标重新定位到文件开头</span></span><br><span class="line">    <span class="type">char</span>* encoding = (<span class="type">char</span>*)<span class="built_in">calloc</span>(size+<span class="number">10</span>, <span class="keyword">sizeof</span>(<span class="type">char</span>));   </span><br><span class="line">    <span class="type">char</span> ch;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; (ch = fgetc(fp)) != EOF; ++i) &#123;      <span class="comment">// 将数据存入 encoding</span></span><br><span class="line">        encoding[i] = ch;</span><br><span class="line">        encoding[i+<span class="number">1</span>] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(fp);</span><br><span class="line">    <span class="keyword">return</span> encoding;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将生成的解码字符写入文件中</span></span><br><span class="line"><span class="comment"> * @param encoding 已解码字符串</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">putStringInFIle</span><span class="params">(<span class="type">char</span>* decoding)</span> &#123;</span><br><span class="line">    FILE* fp = fopen(FILEDECODING, <span class="string">&quot;w+&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; decoding[i] != <span class="string">&#x27;\0&#x27;</span>; ++i) &#123;</span><br><span class="line">        fputc(decoding[i], fp);</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(fp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**********************************************   操作流程  ***************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">huffmanDecode</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 读取 (INPUTSTRING) 文本</span></span><br><span class="line">    <span class="type">char</span>* inputString = getInputString();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 构建 Huffman 树</span></span><br><span class="line">    LPTree huffmanTree = createHuffmanTree(inputString);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 读取 (ENCODING) 文本</span></span><br><span class="line">    <span class="type">char</span>* encoding = getEncoding();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将二进制编码进行解码</span></span><br><span class="line">    <span class="type">char</span>* decoding = decode(huffmanTree, encoding);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将解码字符保存至文件 (DECODING)</span></span><br><span class="line">    putStringInFIle(decoding);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n\nDECODE SUCCESS!\n\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***************************************************  主函数   **************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// testHuffmanTree();</span></span><br><span class="line">    <span class="comment">// testHuffmanDecode();</span></span><br><span class="line">    huffmanDecode();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>decode.c 的各个测试结果以及各文件内容及最后的输出文件</p>
<blockquote>
<ul>
<li>哈夫曼树的测试 - - testHuffmanTree() 函数<br><img src="https://i-blog.csdnimg.cn/blog_migrate/656968f1df47795c5f782f8406d99730.png"><br>与预期结果一致</li>
<li>哈夫曼解码的测试 - - testHuffmanDecode() 函数<br><img src="https://i-blog.csdnimg.cn/blog_migrate/959c1889095896df3c41da18362c1976.png"><br>与预期结果一致</li>
<li>运行结果 - - huffmanDecode() 函数<br><img src="https://i-blog.csdnimg.cn/blog_migrate/e5a85e4cdfa257e27029c55af35d497a.png"><br>与预期结果一致</li>
</ul>
</blockquote>
<h3 id="inputString-txt-1"><a href="#inputString-txt-1" class="headerlink" title="inputString.txt"></a>inputString.txt</h3><p>此文件与encode.c中使用的为同一文件读取数据，无任何改变</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line">Festivals and celebrations </span><br><span class="line">    Festivals and celebrations of all kinds have been held everywhere since ancient times.Most ancient </span><br><span class="line">festivals would celebrate the end of cold weather,planting in spring and harvest in autumn.Sometimes </span><br><span class="line">celebratewould be held after hunters had caught animals.At that time people would starve if food was </span><br><span class="line">difficult to find,especially during the cold winter months.Today&#x27;s festivals have many origins ,some </span><br><span class="line">religious,some seasonal, and some for special people or events. </span><br><span class="line"></span><br><span class="line">Festivals of the Dead </span><br><span class="line">    Some festivals are held to honour the dead or to satisfy the ancestors,who might return either to </span><br><span class="line">help or to do harm.For the Japanese festival.Obon,people should go to clean graves and light incense </span><br><span class="line">in memory of their ancestors.They also light lamps and play music because they think that this will </span><br><span class="line">lead the ancestors back to earth.In Mexico,people celebrate the Day of the Dead in early November.On </span><br><span class="line">this impoutant feast day,people eat food in the shape of skulls and cakes with &quot;bones&quot; on them.They offer </span><br><span class="line">food,flowers and gifts to the dead.The Western holiday Halloween also had its origin in old beliefs about </span><br><span class="line">the return of the spirits of dead people. It is now a children&#x27;s festival,when they can dress up and to to </span><br><span class="line">their neighbours&#x27;homes to ask for sweets.If the neighbours do not give any sweets,the children might play a </span><br><span class="line">trick on them. </span><br><span class="line"></span><br><span class="line">` 1 2 3 4 5 6 7 8 9 0 - = </span><br><span class="line"></span><br><span class="line">Festivals to Honour </span><br><span class="line">    People Festivals can also be held to honour famous people .The Dragon Boat Festival in China honours the </span><br><span class="line">famous ancient poet,Qu Yuan.In the USA Columbus Day is in memory of the arrival of Christopher Columbus in New </span><br><span class="line">World.India has a national festival on October 2 to honour Mohandas Gandhi,the leader who helped gain India&#x27;s </span><br><span class="line">independence from Britain. </span><br><span class="line"></span><br><span class="line">Harvest Festivals </span><br><span class="line">    Harvest and Thanksgiving festivals can be very happy events.People are grateful because their food is </span><br><span class="line">gathered for the winter and the agricultural work is over.In European countries,people will usually decorate </span><br><span class="line">churches and town halls with flowers and fruit,and will get together to have meals.Some people might win </span><br><span class="line">awards for their farm produce,like the biggest watermelon or the most handsome rooster.China and Japan have </span><br><span class="line">mid-autumn festivals,when people admire the moon and in China,enjoy mooncakes. </span><br><span class="line"></span><br><span class="line">Spring Festivals </span><br><span class="line">    The most energetic and important festivals are the ones that look forward to the end of winter and to </span><br><span class="line">the coming of spring.At the Spring Festival in China,people eat dumplings,fish and meat and may give </span><br><span class="line">children lucky money in red paper.There are dragon dances and carnivals,and families celebrate the Lunar </span><br><span class="line">New Year together.Some Western countries have very exciting carnivals,which take place forty days before </span><br><span class="line">Easter,usually in February.These carnivals might include parades,dancing in the streets day and night,loud </span><br><span class="line">music and colourful clothing of all kinds.Easter is an important religious and social festival for </span><br><span class="line">Christians aroud the world.It celebrates the return of Jesus from the dead and the coming of spring and new </span><br><span class="line">life.Japanâ€™s Cherry Blossom Festival happens a little later.The country, covered with cherry tree flowers, </span><br><span class="line">looks as thought it is covered with pink snow. People love to get together to eat , drink and have fun with </span><br><span class="line">each other.Festivals let us enjoy life,be proud of our customs and forget our work for a little while </span><br><span class="line"></span><br><span class="line">q w e r t y u i o p [ ] \</span><br><span class="line"></span><br><span class="line">A SAD LOVE STORY</span><br><span class="line">    Li Fang was heart-broken.It was Valentine&#x27;s Day and Hu Jin had said she would meet him at the coffee </span><br><span class="line">shop after work. But she didn&#x27;t turn up. She could be with her friends right now laughing at him.She said </span><br><span class="line">she would be there at seven o&#x27;clock, and he thought she would keep her word. He had looked forward to </span><br><span class="line">meeting her all day, and now he was alone with his roses and chocolates, like a fool. Well, he was not </span><br><span class="line">going to hold his breath for her to apologize. He would drown his sadness in coffee. </span><br><span class="line"></span><br><span class="line">    It was obvious that the manager of the coffee shop was waiting for Li Fang to leave-he wiped the tables, </span><br><span class="line">then sat down and turned on the TV-just what Li Fang needed! A sad Chinese story about lost love. </span><br><span class="line"></span><br><span class="line">a s d f g h j k l ; &#x27; </span><br><span class="line"></span><br><span class="line">    The granddaughter of the Goddess of Heaven visted the earth. Her name was ZhinÃ¼,the weaving girl. While </span><br><span class="line">she was on earth she met the herd boy Niulang and they fell in love.(&quot;Just like me and Hu Jin,&quot;thought Li Fang.)</span><br><span class="line">They got married secretly, and they were very happy.(&quot;We could be like that,&quot;thought Li Fang.)When the Goddess </span><br><span class="line">of Heaven knew that her granddaughter was married to a human, she became very angry and made the weaving girl </span><br><span class="line">return to Heaven.Niulang tried to follow her, but the river of stars,the Milly Way, stopped him.Finding that </span><br><span class="line">Zhinu was heart-broken, her grandmother finally decided to let the couple cross the Milky Way to meet once a </span><br><span class="line">year. Magpies make a bridge of their wings so the couple can cross the river to meet on the seventh day of </span><br><span class="line">the seventh lunar month. People in China hope that the weather will be fine on that day, because if it is </span><br><span class="line">raining, it means that ZhinÃ¼ is weeping and the couple won&#x27;t be able to meet. </span><br><span class="line"></span><br><span class="line">    The announcer said,&quot;This is the story of Qiqiao Festival.When foreigners hear about the story, they call </span><br><span class="line">it a Chinese Valentine&#x27;s story.It&#x27;s a fine day today, so I hope you can all meet the one you love.&quot; </span><br><span class="line"></span><br><span class="line">z x c v b n m , . / </span><br><span class="line"></span><br><span class="line">    As Li Fang set off for home, he thought,&quot;I guess Hu Jin doesn&#x27;t love me .I&#x27;ll just throw these flowers </span><br><span class="line">and chocolates away. I don&#x27;t want them to remind me of her.&quot; So he did. </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">~ ! @ # $ % ^ &amp; * ( ) _ + </span><br><span class="line"></span><br><span class="line">    As he sadly passed the tea shop on the corner on his way home, he heard a voice calling him. There was Hu Jin </span><br><span class="line">waving at him and calling , &quot;why are you so late?I&#x27;ve been waiting for you for a long time!And I have a gift for you!&quot; </span><br><span class="line"></span><br><span class="line">    What would he do? He had thrown away her Valentine gifts!She would never forgive him. This would not be a happy </span><br><span class="line">Valentine&#x27;s Day! </span><br><span class="line"></span><br><span class="line">UNIT2 </span><br><span class="line">COME AND EAT HERE (1) </span><br><span class="line">    Wang Peng sat in his empty restaurant feeling very frustrated. It had been a very strange morning. Usually he </span><br><span class="line">got up early and prepared his menu of barbecued mutton kebabs, roast pork, stir-flied vegetables and fried rice. </span><br><span class="line"></span><br><span class="line">Q W E R T Y U I O P &#123; &#125; | </span><br><span class="line"></span><br><span class="line">Then by lunchtime they would all be sold. By now his restaurant ought to be full of people. But not today! Why was that? </span><br><span class="line">What could have happened? He thought of his mutton, beef and bacon cooked in the hottest, finest oil. His cola was sugary </span><br><span class="line">and cold, and his ice cream was made of milk, cream and delicious fruit. &quot;Nothing could be better,&quot; he thought. Suddenly </span><br><span class="line">he saw his friend Li Chang hurrying by. &quot;Hello, Lao Li,&quot; he called. &quot;Your usual?&quot; But Li Chang seemed not to hear. </span><br><span class="line">What was the matter? Something terrible must have happened if Li Chang was not coming to eat in his restaurant as </span><br><span class="line">he always did. Wang Peng followed Li Chang into a new small restaurant. He saw a sign in the window. Tired of all </span><br><span class="line">that fat? Want to lose weight? Come inside Yong Hui&#x27;s slimming restaurant. Only slimming foods served here. Make </span><br><span class="line">yourself thin again! Curiosity drove Wang Peng inside. It was full of people. The hostess, a very thin lady, came </span><br><span class="line"></span><br><span class="line">A S D F G H J K L : &quot; </span><br><span class="line"></span><br><span class="line">forward. &quot;Welcome,&quot; she said. &quot;My name is Yong Hui. I&#x27;ll help you lose weight and be fit in two weeks if you eat here </span><br><span class="line">every day.&quot; Then she gave a menu to Wang Peng. There were few choices of food and drink on it: just rice, raw vegetables </span><br><span class="line">served in vinegar, fruit and water. Wang Peng was amazed at this and especially at the prices. It cost more than a good </span><br><span class="line">meal in his restaurant! He could not believe his eyes. He threw down the menu and hurried outside. On his way home he </span><br><span class="line">thought about his own menu. Did it make people fat? Perhaps he should go to the library and find out. He could not have </span><br><span class="line"></span><br><span class="line">Z X C V B N M &lt; &gt; ?</span><br><span class="line"></span><br><span class="line">Yong Hui getting away with telling people lies! He had better do some research! At the library Wang Peng was surprised </span><br><span class="line">to find that his restaurant served far too much fat and Yong Hui&#x27;s far too little. Even though her customers might get </span><br><span class="line">thin after eating Yong Hui&#x27;s food, they were not eating enough energy-giving food to keep them fit. They would become </span><br><span class="line">tired very quickly. Wang Peng felt more hopeful as he drove back home. Perhaps with a discount and a new sign he could </span><br><span class="line">win his customers back. So he wrote: Want to feel fit and energetic? Come and eat here! Discounts today! Our food gives </span><br><span class="line">you energy all day! The competition between the two restaurants was on!</span><br></pre></td></tr></table></figure>

<h3 id="encoding-txt-1"><a href="#encoding-txt-1" class="headerlink" title="encoding.txt"></a>encoding.txt</h3><p>此文件是编码文件，也就是encode.c最终生成的那个文件，里面存有哈夫曼编码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">111111111111110101001100011110101010011101111101111011011110101101000111000101101111110000000100110001111000000000111110101110010101100111000100111001111011111000011110000000001111101100011111000011000000100111111011000001110110001111010101001110111111010101001010010000100010111000111111000001111100111100011111101001111101001011001010111000111110000111111101110011001110101100101101111000000001111101010010001100000110100111100000000011111000100110110111011100111011101101011101101010000000001010111111011100110001111010001111010100101111100101011010011110000001011001010100110100111011101011111000000000111100011110000111110001101111001101010001100010110111000111101010000010011000111000111111010011111010010110010101110001111010100100110100001101000110110101110001110101111101110011010011111010010000000100010100111011001111110111000011111001011001111100110110110111000101000111101110111110111000111101110111110101100100011001101001101011111111111100011100000010011000111101010011100010101111010011100000011111010001111101010000111011011000011110000100110100111100000001100101111010100101111100110101010010110011110000001110011110001111100100110111001010110000100010100111111000101001100001000110110110110100110111110000001111101010011100010101111010011101010011101011001110011111100000111110011100010100110101100111100000100101011000110111000111100000010011011111101010011100010101111010011101010111100011110110110011111001111000010010110000110000110011110110100001111100100110111001010110000100010100111010001111011111110101011110010110010110110101110110100110100000010011011111110000110010100001010110100111000111111010011111010010000001001010111000111100000001011001110010110010100010111000111110110110110010001101111101010100110110000110111101110111101101011100011111110010111111000111111010010110101101010101110000001111101100100110111101110011010000011011111010101011010000010111000101100111100010110110001010011011111010100001101010101110110110111000101000111000111111010011111010010000001001010111000111111011001001101011001101001110101011110001111000011111100000011001110010001101110110100001110000001001100011110101010011101111110000000001111101011100110001000001110011101010000111011011111011110101100110000000010001011100011111000001110011100101001011011101110011111010110001011011100011100001001110101100111100001001011000011000001010100110100111010011000011100011111101001111101001000000100101011100011111010101001110111110101011110001111011000111101011010001011100011111000011111100110011000111010001011110000010011011111110010011101110001001000101100110010101100011110011101111101101000000011111001101111010101001011001110111111010001001010000011011100011100100101011100011110001110110010101110001111110000011110111101110111101010001101000110100110100110100110110110110111011011110110111110101011001111011011100010111101101110001001110110111000111111011011100011011101101110000011110110111000000111011011100001111101101110110101110110111100111011011100110011101101011010100010111110101011100111111001111100011101100111100010111010011101111110110001110110111001011111011011011010111101101110010100110101001111110111111010011111000011111000111100001111101010001111111010011111101111110110111000010111110100011111011010011011110111111110101000100111101100111110101111110110111110101111101011111101101011100011011101101110110111110110100110100110110110010111011011010111011011100111011101101110111011110110111011100111011011101111111101101101101001110110111011110111011011101100111101101111010111000111110111110110110110111111011011101100011101101011010101101111100011100111110100001111111010101101011100011110111110100000111101101110101111110101001111110100010011100011101111101101101100011110110110110011111011011011000011101101000011101011101101111111111010101111111101001011110001111101011101101100111110100001011101101110010011110001111111111101010110001111101010101110110100110111010011101101110010001111101001001110001111100111011011011111111010000001111101000101111011011100110111101101110011111111101010000</span><br></pre></td></tr></table></figure>

<h3 id="decoding-txt"><a href="#decoding-txt" class="headerlink" title="decoding.txt"></a>decoding.txt</h3><p>此文件是解码encoding.txt文件之后生成的文本文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">    It was obvious that the manager of the coffee shop was waiting for Li Fang to leave-he wiped the tables, </span><br><span class="line">then sat down and turned on the TV-just what Li Fang needed! A sad Chinese story about lost love.</span><br><span class="line"></span><br><span class="line">    What would he do? He had thrown away her Valentine gifts!She would never forgive him. This would not be a happy </span><br><span class="line">Valentine&#x27;s Day! </span><br><span class="line"></span><br><span class="line">his friend Li Chang hurrying by. &quot;Hello, Lao Li,&quot; he called. &quot;Your usual?&quot; But Li Chang seemed not to hear. </span><br><span class="line">What was the matter? Something terrible must have happened if Li Chang was not coming to eat in his restaurant as </span><br><span class="line">he always did. Wang Peng followed</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">` 1 2 3 4 5 6 7 8 9 0 - = </span><br><span class="line">q w e r t y u i o p [ ] \</span><br><span class="line">a s d f g h j k l ; &#x27; </span><br><span class="line">z x c v b n m , . / </span><br><span class="line"></span><br><span class="line">~ ! @ # $ % ^ &amp; * ( ) _ + </span><br><span class="line">Q W E R T Y U I O P &#123; &#125; | </span><br><span class="line">A S D F G H J K L : &quot; </span><br><span class="line">Z X C V B N M &lt; &gt; ?</span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>对比 encodeString.txt 和 decoding.txt 可以发现，两文本完全相同，说明编码解码功能实现正常，整个流程如下：</p>
<blockquote>
<p>读取 inputString.txt 中的内容后生成基本的哈夫曼树，编码过程还需生成每个字符的编码，然后读取 encodString.txt 中的内容，此文件内容就是待编码文本，需要压缩后发送给别处，编码成功后将生成的编码保存到 encoding.txt 文件中发送给接收方，接收方得到此文件后可以进行解码，读取同一个 inputString.txt 文件生成与发送方一模一样的哈夫曼树，然后对 encoding.txt 文件中的编码进行解码操作，将解码后的字符串保存到 decoding.txt 文件中</p>
</blockquote>
</div><div class="article-licensing box"><div class="licensing-title"><p>huffman编码</p><p><a href="https://lin-ws.github.io/2024/12/26/huffman编码/">https://lin-ws.github.io/2024/12/26/huffman编码/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>Wen Shilin</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2024-12-26</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2024-12-26</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2024/12/26/page/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">page</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2024/12/25/t/"><span class="level-item">todo</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><!--!--><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen  order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#Huffman-编码"><span class="level-left"><span class="level-item">1</span><span class="level-item">Huffman 编码</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#源代码"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">源代码</span></span></a></li><li><a class="level is-mobile" href="#encode-c"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">encode.c</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#2"><span class="level-left"><span class="level-item">1.2.1</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-1"><span class="level-left"><span class="level-item">1.2.2</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-2"><span class="level-left"><span class="level-item">1.2.3</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-3"><span class="level-left"><span class="level-item">1.2.4</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-4"><span class="level-left"><span class="level-item">1.2.5</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-5"><span class="level-left"><span class="level-item">1.2.6</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-6"><span class="level-left"><span class="level-item">1.2.7</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-7"><span class="level-left"><span class="level-item">1.2.8</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#inputString-txt"><span class="level-left"><span class="level-item">1.2.9</span><span class="level-item">inputString.txt</span></span></a></li><li><a class="level is-mobile" href="#encodeString-txt"><span class="level-left"><span class="level-item">1.2.10</span><span class="level-item">encodeString.txt</span></span></a></li><li><a class="level is-mobile" href="#encoding-txt"><span class="level-left"><span class="level-item">1.2.11</span><span class="level-item">encoding.txt</span></span></a></li><li><a class="level is-mobile" href="#1"><span class="level-left"><span class="level-item">1.2.12</span><span class="level-item">1</span></span></a></li><li><a class="level is-mobile" href="#2-8"><span class="level-left"><span class="level-item">1.2.13</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-9"><span class="level-left"><span class="level-item">1.2.14</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-10"><span class="level-left"><span class="level-item">1.2.15</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-11"><span class="level-left"><span class="level-item">1.2.16</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-12"><span class="level-left"><span class="level-item">1.2.17</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-13"><span class="level-left"><span class="level-item">1.2.18</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-14"><span class="level-left"><span class="level-item">1.2.19</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-15"><span class="level-left"><span class="level-item">1.2.20</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-16"><span class="level-left"><span class="level-item">1.2.21</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-17"><span class="level-left"><span class="level-item">1.2.22</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-18"><span class="level-left"><span class="level-item">1.2.23</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-19"><span class="level-left"><span class="level-item">1.2.24</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-20"><span class="level-left"><span class="level-item">1.2.25</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-21"><span class="level-left"><span class="level-item">1.2.26</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-22"><span class="level-left"><span class="level-item">1.2.27</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-23"><span class="level-left"><span class="level-item">1.2.28</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-24"><span class="level-left"><span class="level-item">1.2.29</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-25"><span class="level-left"><span class="level-item">1.2.30</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-26"><span class="level-left"><span class="level-item">1.2.31</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-27"><span class="level-left"><span class="level-item">1.2.32</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-28"><span class="level-left"><span class="level-item">1.2.33</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#2-29"><span class="level-left"><span class="level-item">1.2.34</span><span class="level-item">2</span></span></a></li><li><a class="level is-mobile" href="#decode-c"><span class="level-left"><span class="level-item">1.2.35</span><span class="level-item">decode.c</span></span></a></li><li><a class="level is-mobile" href="#inputString-txt-1"><span class="level-left"><span class="level-item">1.2.36</span><span class="level-item">inputString.txt</span></span></a></li><li><a class="level is-mobile" href="#encoding-txt-1"><span class="level-left"><span class="level-item">1.2.37</span><span class="level-item">encoding.txt</span></span></a></li><li><a class="level is-mobile" href="#decoding-txt"><span class="level-left"><span class="level-item">1.2.38</span><span class="level-item">decoding.txt</span></span></a></li></ul></li><li><a class="level is-mobile" href="#总结"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">总结</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-12-26T06:21:22.000Z">2024-12-26</time></p><p class="title"><a href="/2024/12/26/page/">page</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-12-25T16:06:10.000Z">2024-12-26</time></p><p class="title"><a href="/2024/12/26/huffman%E7%BC%96%E7%A0%81/">huffman编码</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-12-25T12:58:05.000Z">2024-12-25</time></p><p class="title"><a href="/2024/12/25/t/">todo</a></p><p class="categories"><a href="/categories/categories1/">categories1</a> / <a href="/categories/categories3/">categories3</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-12-24T09:17:59.000Z">2024-12-24</time></p><p class="title"><a href="/2024/12/24/test/">test</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-12-24T09:00:37.326Z">2024-12-24</time></p><p class="title"><a href="/2024/12/24/hello-world/">Hello World</a></p></div></article></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/categories1/"><span class="level-start"><span class="level-item">categories1</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/categories3/"><span class="level-start"><span class="level-item">categories3</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/hello/"><span class="tag">hello</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tag1/"><span class="tag">tag1</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tag3/"><span class="tag">tag3</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/test/"><span class="tag">test</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="Lin&#039;s blog" height="28"></a><p class="is-size-7"><span>&copy; 2024 Wen Shilin</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p><p class="is-size-7">© Wen Shilin</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Lin-WS/Lin-WS.github.io"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script data-pjax src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.10.0/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/KaTeX/0.15.1/katex.min.css"><script src="https://cdnjs.loli.net/ajax/libs/KaTeX/0.15.1/katex.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/KaTeX/0.15.1/contrib/auto-render.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/KaTeX/0.15.1/contrib/mhchem.min.js" defer></script><script>window.addEventListener("load", function() {
            document.querySelectorAll('[role="article"] > .content').forEach(function(element) {
                renderMathInElement(element);
            });
        });</script><script src="https://cdnjs.loli.net/ajax/libs/pjax/0.2.8/pjax.min.js"></script><script src="/js/pjax.js"></script><!--!--><!--!--><!--!--><script data-pjax src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script data-pjax src="/js/insight.js" defer></script><script data-pjax>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>